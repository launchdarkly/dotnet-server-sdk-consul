<!DOCTYPE html>
<!--[if IE]><![endif]-->
<html>
  
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>LaunchDarkly Server-Side .NET SDK Consul Integration </title>
    <meta name="viewport" content="width=device-width">
    <meta name="title" content="LaunchDarkly Server-Side .NET SDK Consul Integration ">
    <meta name="generator" content="docfx 2.57.2.0">
    
    <link rel="shortcut icon" href="favicon.ico">
    <link rel="stylesheet" href="styles/docfx.vendor.css">
    <link rel="stylesheet" href="styles/docfx.css">
    <link rel="stylesheet" href="styles/main.css">
    <meta property="docfx:navrel" content="toc.html">
    <meta property="docfx:tocrel" content="toc.html">
    
    
    
  </head>
  <body data-spy="scroll" data-target="#affix" data-offset="120">
    <div id="wrapper">
      <header>
        
        <nav id="autocollapse" class="navbar navbar-inverse ng-scope" role="navigation">
          <div class="container">
            <div class="navbar-header">
              <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#navbar">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
              </button>
              
              <a class="navbar-brand" href="index.html">
                <img id="logo" class="svg" src="logo.svg" alt="">
              </a>
            </div>
            <div class="collapse navbar-collapse" id="navbar">
              <form class="navbar-form navbar-right" role="search" id="search">
                <div class="form-group">
                  <input type="text" class="form-control" id="search-query" placeholder="Search" autocomplete="off">
                </div>
              </form>
            </div>
          </div>
        </nav>
        
        <div class="subnav navbar navbar-default">
          <div class="container hide-when-search" id="breadcrumb">
            <ul class="breadcrumb">
              <li></li>
            </ul>
          </div>
        </div>
      </header>
      <div role="main" class="container body-content hide-when-search">
        <div class="article row grid">
          <div class="col-md-10">
            <article class="content wrap" id="_content" data-uid="">
<h1 id="launchdarkly-server-side-net-sdk-consul-integration">LaunchDarkly Server-Side .NET SDK Consul Integration</h1>

<p><strong>(version 5.0.0)</strong></p>
<p>The <a href="https://nuget.org/packages/LaunchDarkly.ServerSdk.Consul"><code>LaunchDarkly.ServerSdk.Consul</code></a> package provides a Consul-backed persistence mechanism (data store) for the <a href="https://github.com/launchdarkly/dotnet-server-sdk">LaunchDarkly .NET SDK</a>, replacing the default in-memory data store. The underlying Consul client implementation is <a href="https://github.com/PlayFab/consuldotnet">https://github.com/PlayFab/consuldotnet</a>.</p>
<p>For more information, see also: <a href="https://docs.launchdarkly.com/sdk/features/storing-data/consul#net-server-side">Using Consul as a persistent feature store</a>.</p>
<p>Version 2.0.0 and above of this library works with version 6.0.0 and above of the LaunchDarkly .NET SDK. For earlier versions of the SDK, use the latest 1.x release of this library.</p>
<p>The entry point for using this integration is the <strong><a class="xref" href="api/LaunchDarkly.Sdk.Server.Integrations.Consul.html">Consul</a></strong> class in <a class="xref" href="api/LaunchDarkly.Sdk.Server.Integrations.html">LaunchDarkly.Sdk.Server.Integrations</a>.</p>
<h2 id="quick-setup">Quick setup</h2>
<p>This assumes that you have already installed the LaunchDarkly .NET SDK.</p>
<ol>
<li><p>Add the NuGet package <a href="https://nuget.org/packages/LaunchDarkly.ServerSdk.Consul"><code>LaunchDarkly.ServerSdk.Consul</code></a> to your project.</p>
</li>
<li><p>Import the package (note that the namespace is different from the package name):</p>
</li>
</ol>
<pre><code class="lang-csharp">        using LaunchDarkly.Sdk.Server.Integrations;
</code></pre><ol>
<li>When configuring your <code>LdClient</code>, add the Consul data store as a <code>PersistentDataStore</code>. You may specify any custom Consul options using the methods of <code>ConsulDataStoreBuilder</code>. For instance, to customize the Consul host address:</li>
</ol>
<pre><code class="lang-csharp">        var ldConfig = Configuration.Default(&quot;YOUR_SDK_KEY&quot;)
            .DataStore(
                Components.PersistentDataStore(
                    Consul.DataStore().Address(&quot;http://my-consul-host:8500&quot;)
                )
            )
            .Build();
        var ldClient = new LdClient(ldConfig);
</code></pre><p>By default, the store will try to connect to a local Consul instance on port 8500.</p>
<h2 id="caching-behavior">Caching behavior</h2>
<p>The LaunchDarkly SDK has a standard caching mechanism for any persistent data store, to reduce database traffic. This is configured through the SDK&#39;s <code>PersistentDataStoreBuilder</code> class as described in the SDK documentation. For instance, to specify a cache TTL of 5 minutes:</p>
<pre><code class="lang-csharp">        var config = Configuration.Default(&quot;YOUR_SDK_KEY&quot;)
            .DataStore(
                Components.PersistentDataStore(
                    Consul.DataStore().Address(&quot;http://my-consul-host:8500&quot;)
                ).CacheTime(TimeSpan.FromMinutes(5))
            )
            .Build();
</code></pre><p>By default, the store will try to connect to a local Consul instance on port 8500.</p>
</article>
          </div>
          
          <div class="hidden-sm col-md-2" role="complementary">
            <div class="sideaffix">
              <nav class="bs-docs-sidebar hidden-print hidden-xs hidden-sm affix" id="affix">
                <h5>In This Article</h5>
                <div></div>
              </nav>
            </div>
          </div>
        </div>
      </div>
      
      <footer>
        <div class="grad-bottom"></div>
        <div class="footer">
          <div class="container">
            <span class="pull-right">
              <a href="#top">Back to top</a>
            </span>
            
            <span>Generated by <strong>DocFX</strong></span>
          </div>
        </div>
      </footer>
    </div>
    
    <script type="text/javascript" src="styles/docfx.vendor.js"></script>
    <script type="text/javascript" src="styles/docfx.js"></script>
    <script type="text/javascript" src="styles/main.js"></script>
  </body>
</html>
